(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1072:function(e,t,n){e.exports=n.p+"static/media/quanBg.960fdadf.png"},1073:function(e,t,n){e.exports=n.p+"static/media/quanUsedBg.8505621e.png"},1074:function(e,t,n){var o=n(1075);"string"===typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(46)(o,a);o.locals&&(e.exports=o.locals)},1075:function(e,t,n){(e.exports=n(45)(!1)).push([e.i,'.myCoupon {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n.myCoupon .topBar {\n  height: 96rem;\n  width: 100%;\n  background: #fff;\n  z-index: 999;\n}\n.myCoupon .topBar .top-operation {\n  height: 0.48rem;\n  display: flex;\n}\n.myCoupon .topBar .top-operation .backView {\n  width: 0.4rem;\n  height: 0.48rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n}\n.myCoupon .topBar .top-operation .backView .back {\n  width: auto;\n  height: 0.18rem;\n}\n.myCoupon .topBar .top-operation .get-coupon {\n  flex: 1;\n  padding-top: 0.08rem;\n}\n.myCoupon .topBar .top-operation .get-coupon input {\n  width: 2.75rem;\n  border-radius: 0.16rem;\n  background: #f5f6f8;\n  padding: 0 0.15rem;\n  height: 0.32rem;\n}\n.myCoupon .topBar .top-operation .get-coupon span {\n  display: inline-block;\n  line-height: 0.32rem;\n  padding-left: 0.1rem;\n  font-size: 0.16rem;\n  color: #2d343b;\n}\n.myCoupon .topBar .tabs {\n  height: 0.44rem;\n  background: #fff;\n}\n.myCoupon .topBar .zhanwei {\n  width: 0.4rem;\n  height: 0.4rem;\n  background: #fff;\n}\n.myCoupon .content {\n  flex: 1;\n  background: #f5f6f8;\n}\n.myCoupon .am-list-view-scrollview {\n  margin: 0 !important;\n}\n.myCoupon .am-list-body:before {\n  content: "" !important;\n  background-color: #f5f6f8 !important;\n}\n.myCoupon .am-list-body:after {\n  content: "" !important;\n  background-color: #f5f6f8 !important;\n}\n.myCoupon-item {\n  background: #f5f6f8;\n  padding: 0.2rem 0.15rem 0.1rem 0.15rem;\n}\n.myCoupon-item .content-item {\n  width: 3.45rem;\n  height: 1.3rem;\n  background-size: 100% 100%;\n}\n.myCoupon-item .content-item .textContent {\n  padding: 0.3rem 0.4rem;\n  display: flex;\n  justify-content: space-between;\n}\n.myCoupon-item .content-item .textContent .leftView .name {\n  color: #2d343b;\n  font-size: 0.16rem;\n}\n.myCoupon-item .content-item .textContent .leftView .desc {\n  color: #2d343b;\n  font-size: 0.14rem;\n  margin-top: 0.07rem;\n  margin-bottom: 0.04rem;\n}\n.myCoupon-item .content-item .textContent .leftView .time {\n  color: #657281;\n  font-size: 0.14rem;\n}\n.myCoupon-item .content-item .textContent .rightView {\n  color: #debf81;\n}\n.myCoupon-item .content-item .textContent .rightView .topView .fuhao {\n  font-size: 0.12rem;\n}\n.myCoupon-item .content-item .textContent .rightView .topView .money {\n  font-size: 0.4rem;\n  font-weight: bold;\n}\n.myCoupon-item .content-item .textContent .rightView .bottomView {\n  font-size: 0.12rem;\n  padding-left: 0.1rem;\n  padding-right: 0.1rem;\n  height: 0.21rem;\n  border-radius: 0.105rem;\n  background-color: #debf81;\n  color: #fff;\n  line-height: 0.21rem;\n  text-align: center;\n}\n.myCoupon-itemGray {\n  background: #f5f6f8;\n  padding: 0.2rem 0.15rem 0.1rem 0.15rem;\n}\n.myCoupon-itemGray .content-item {\n  width: 3.45rem;\n  height: 1.3rem;\n  background-size: 100% 100%;\n}\n.myCoupon-itemGray .content-item .textContent {\n  padding: 0.3rem 0.4rem;\n  display: flex;\n  justify-content: space-between;\n}\n.myCoupon-itemGray .content-item .textContent .leftView .name {\n  color: #2d343b;\n  font-size: 0.16rem;\n}\n.myCoupon-itemGray .content-item .textContent .leftView .desc {\n  color: #2d343b;\n  font-size: 0.14rem;\n  margin-top: 0.07rem;\n  margin-bottom: 0.04rem;\n}\n.myCoupon-itemGray .content-item .textContent .leftView .time {\n  color: #657281;\n  font-size: 0.14rem;\n}\n.myCoupon-itemGray .content-item .textContent .rightView {\n  color: #a1adb9;\n}\n.myCoupon-itemGray .content-item .textContent .rightView .topView .fuhao {\n  font-size: 0.12rem;\n}\n.myCoupon-itemGray .content-item .textContent .rightView .topView .money {\n  font-size: 0.4rem;\n  font-weight: bold;\n}\n.myCoupon-itemGray .content-item .textContent .rightView .bottomView {\n  font-size: 0.12rem;\n  padding-left: 0.1rem;\n  padding-right: 0.1rem;\n  height: 0.21rem;\n  border-radius: 0.105rem;\n  background-color: #a1adb9;\n  color: #fff;\n  line-height: 0.21rem;\n  text-align: center;\n}\n',""])},1188:function(e,t,n){"use strict";n.r(t);n(760);var o,a=n(761),i=n.n(a),r=(n(865),n(866)),c=n.n(r),m=(n(303),n(107)),s=n.n(m),u=n(755),l=(n(764),n(765)),d=n.n(l),p=n(21),f=n(22),h=n(24),g=n(23),y=n(25),b=n(0),C=n.n(b),w=n(79),v=n(19),k=(n(127),n(11)),x=n(130),E=n.n(x),V=n(1072),N=n.n(V),S=n(1073),j=n.n(S),D=(n(1074),n(756)),O={1:"\u5eb7\u7b56\u826f\u54c1\u5e73\u53f0\u5238",2:"\u5e97\u94fa\u4f18\u60e0\u5238",3:"\u65b0\u4eba\u4e13\u4eab\u5238",4:"\u9080\u8bf7\u65b0\u4eba\u5956\u52b1\u5238"},R=Object(D.a)(o=function(e){function t(e){var n;Object(p.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).onRefresh=function(){n.setState({refreshing:!0,isLoading:!0}),n.page=1,n.sendDataRequest(n.page,n.state.status)},n.onEndReached=function(e){n.state.isLoading||(n.setState({isLoading:!0}),n.page=n.page+1,n.sendDataRequest(n.page,n.state.status))},n.onTabChange=function(e){n.setState({status:e.key},function(){n.onRefresh()})},n.selectRow=function(e){console.log("rowData",e),1===e.status&&v.a.push("/coupongoodsList?coupon_id="+e.id+"&reach_money="+e.reach_money+"&money="+e.money)};var o=new d.a.DataSource({rowHasChanged:function(e,t){return e!==t}});return n.state={refreshing:!0,isLoading:!0,dataSource:o,isEdit:!1,status:1,height:document.documentElement.clientHeight,couponCode:""},n.data=null,n.page=1,n}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){this.sendDataRequest(this.page,this.state.status)}},{key:"componentDidMount",value:function(){var e=this.state.height-w.findDOMNode(this.lv).clientHeight;this.setState({height:e})}},{key:"sendDataRequest",value:function(e,t){var n=this,o={page:e,limit:10,status:t};Object(k.a)({url:"/coupon.list",params:o}).then(function(e){console.log("data",e),1==n.page?(n.data=e.data.data.data,n.setState({refreshing:!1,isLoading:!1,dataSource:n.state.dataSource.cloneWithRows(n.data)})):(n.data=[].concat(Object(u.a)(n.data),Object(u.a)(e.data.data.data)),n.setState({isLoading:!1,refreshing:!1,dataSource:n.state.dataSource.cloneWithRows(n.data)}))})}},{key:"goback",value:function(){v.a.goBack()}},{key:"getTimeText",value:function(e){var t="\u65e0\u9650\u5236",n="\u65e0\u9650\u5236";if(e.start_time){var o=new Date(1e3*e.start_time);console.log(o);var a=o.getMonth()+1;t=o.getFullYear()+"."+a+"."+o.getDate()}if(e.end_time){a=(o=new Date(1e3*e.end_time)).getMonth()+1;n=o.getFullYear()+"."+a+"."+o.getDate()}return t+"-"+n}},{key:"getCouponDesc",value:function(e){return 0===Number(e.reach_money)?"\u65e0\u95e8\u69db\u4f7f\u7528":"\u6ee1"+parseFloat(e.reach_money)+"\u51cf"+parseFloat(e.money)+"\u5143\u5238"}},{key:"exchangeCouponCode",value:function(){var e=this,t=this.state.couponCode;t&&Object(k.a)({url:"/coupon.exchange",params:{code:t}}).then(function(t){s.a.success("\u5151\u6362\u6210\u529f"),e.setState({couponCode:""}),w.findDOMNode(e.scrollEl).scrollTop=0,setTimeout(function(){return e.onRefresh()},1e3)})}},{key:"render",value:function(){var e=this;return C.a.createElement("div",{className:"myCoupon"},C.a.createElement("div",{className:"topBar",ref:function(t){return e.lv=t}},C.a.createElement("div",{className:"top-operation"},C.a.createElement("div",{className:"backView"},C.a.createElement("img",{src:E.a,className:"back",onClick:this.goback,alt:""})),C.a.createElement("div",{className:"get-coupon"},C.a.createElement("input",{placeholder:"\u8f93\u5165\u5151\u6362\u7801",onChange:function(t){e.setState({couponCode:t.target.value.trim()})},value:this.state.couponCode}),C.a.createElement("span",{onClick:function(){return e.exchangeCouponCode()}},"\u5151\u6362"))),C.a.createElement("div",{className:"tabs"},C.a.createElement(c.a,{tabs:[{title:"\u672a\u4f7f\u7528",key:"1"},{title:"\u5df2\u4f7f\u7528",key:"2"},{title:"\u5df2\u8fc7\u671f",key:"3"}],initialPage:0,onChange:this.onTabChange,tabDirection:"horizontal",tabBarActiveTextColor:"#2D343B",tabBarInactiveTextColor:"#657281",tabBarTextStyle:{fontSize:"0.14rem"},tabBarUnderlineStyle:{height:"0.02rem",width:"5%",marginLeft:"14%"},tabBarBackgroundColor:"#fff"}))),C.a.createElement("div",{className:"content"},C.a.createElement(d.a,{style:{height:this.state.height},ref:function(t){return e.scrollEl=t},key:"1",className:"listView",dataSource:this.state.dataSource,renderFooter:function(){return C.a.createElement("div",{style:{height:"100px"}})},renderRow:function(t,n,o){return C.a.createElement("div",{key:o,className:1===t.status?"myCoupon-item":"myCoupon-itemGray",onClick:e.selectRow.bind(e,t)},C.a.createElement("div",{className:"content-item",style:1===t.status?{backgroundImage:"url(".concat(N.a,")")}:{backgroundImage:"url(".concat(j.a,")")}},C.a.createElement("div",{className:"textContent"},C.a.createElement("div",{className:"leftView"},C.a.createElement("div",{className:"name"},2===t.attribute?t.store_name:O[t.attribute]),C.a.createElement("div",{className:"desc"},e.getCouponDesc(t)),C.a.createElement("div",{className:"time"},e.getTimeText(t))),C.a.createElement("div",{className:"rightView"},C.a.createElement("div",{className:"topView"},C.a.createElement("span",{className:"fuhao"},"\xa5"),C.a.createElement("span",{className:"money"},parseFloat(t.money))),C.a.createElement("div",{className:"bottomView"},1===t.status?"\u7acb\u5373\u4f7f\u7528":2===t.status?"\u5df2\u4f7f\u7528":"\u5df2\u8fc7\u671f")))))},pullToRefresh:C.a.createElement(i.a,{refreshing:this.state.refreshing,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:10})))}}]),t}(C.a.Component))||o;t.default=R},755:function(e,t,n){"use strict";function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return o})},756:function(e,t,n){"use strict";var o=n(21),a=n(22),i=n(24),r=n(23),c=n(25),m=n(0),s=n.n(m),u=n(283),l=(n(63),n(80));t.a=function(e){var t,n;return n=t=function(t){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(r.a)(n).call(this,e))).componentDidCache=function(){t.setState({render:!1})},t.componentDidRecover=function(){t.setState({render:!0})},t.state={render:!0},e.cacheLifecycles&&e.cacheLifecycles.didCache(t.componentDidCache),e.cacheLifecycles&&e.cacheLifecycles.didRecover(t.componentDidRecover),t}return Object(c.a)(n,t),Object(a.a)(n,[{key:"render",value:function(){return!l.a.getState().login.isLogin&&this.state.render?s.a.createElement(u.a,{to:"/login"}):s.a.createElement(e,this.props)}}]),n}(s.a.Component),t.displayName=e.displayName||e.name+"_HOC"||"Component_HOC",n}}}]);
//# sourceMappingURL=45.f5bc4085.chunk.js.map