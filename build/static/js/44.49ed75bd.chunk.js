(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1175:function(e,t,n){"use strict";n.r(t);n(304);var i,a=n(212),o=n.n(a),c=(n(760),n(761)),l=n.n(c),r=n(755),s=(n(764),n(765)),m=n.n(s),d=n(21),h=n(22),u=n(24),g=n(23),f=n(25),p=n(0),A=n.n(p),C=n(19),b=n(127),v=n(79),S=n(11),y=n(985),w=n.n(y),E=n(842),x=n.n(E),k=(n(986),n(788)),N=n.n(k),R=n(756),F=Object(R.a)(i=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(u.a)(this,Object(g.a)(t).call(this,e))).onRefresh=function(){n.setState({refreshing:!0,isLoading:!0}),n.page=1,n.sendDataRequest(n.page)},n.onEndReached=function(e){n.state.isLoading||(n.setState({isLoading:!0}),n.page=n.page+1,n.sendDataRequest(n.page))},n.editAction=function(){n.setState({isEdit:!n.state.isEdit})},n.selectRow=function(e,t){if(n.state.isEdit){var i=n.state.selectIds.find(function(t){return e===t}),a=n.state.selectIds;i?(N.a.remove(a,function(t){return t===e}),console.log(a)):a.push(e);var o=!1;n.data.length==a.length&&(o=!0),n.setState({selectIds:a,allSelect:o})}else t&&C.a.push("/goodsdetail/"+e)},n.handleCancelAction=function(){n.sendDeleteRequest()},n.handleAllSelect=function(){if(console.log("\u70b9\u51fb"),n.state.allSelect)n.setState({allSelect:!1,selectIds:[]});else{var e=n.data.map(function(e){return e.collection_info.id});n.setState({allSelect:!0,selectIds:e})}};var i=new m.a.DataSource({rowHasChanged:function(e,t){return e!==t}});return n.state={refreshing:!0,isLoading:!0,dataSource:i,isEdit:!1,selectIds:[],allSelect:!1,height:document.documentElement.clientHeight},n.data=null,n.page=1,n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.sendDataRequest(this.page)}},{key:"componentDidMount",value:function(){var e=this.state.height-v.findDOMNode(this.lv).offsetTop;this.setState({height:e})}},{key:"sendDataRequest",value:function(e){var t=this,n={page:e,limit:10,type:1};Object(S.a)({url:"/user.collection.paging",params:n}).then(function(e){console.log("data",e),1==t.page?(t.data=e.data.data.data,t.setState({refreshing:!1,isLoading:!1,dataSource:t.state.dataSource.cloneWithRows(t.data)})):(t.data=[].concat(Object(r.a)(t.data),Object(r.a)(e.data.data.data)),t.setState({isLoading:!1,refreshing:!1,dataSource:t.state.dataSource.cloneWithRows(t.data)}))}).catch(function(e){t.setState({isLoading:!1,refreshing:!1})})}},{key:"sendDeleteRequest",value:function(){var e=this;if(!(this.state.selectIds.length<1)){var t={ids:this.state.selectIds,type:1};this.setState({isLoading:!0}),Object(S.a)({url:"/user.collection.delete",data:t,method:"delete"}).then(function(t){e.onRefresh(),e.setState({isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})})}}},{key:"checkStatus",value:function(e){return this.state.selectIds.find(function(t){return e===t})?x.a:w.a}},{key:"render",value:function(){var e=this,t=this.state.isEdit;return A.a.createElement("div",{className:"myCollection"},A.a.createElement(b.b,{name:"\u6211\u7684\u6536\u85cf",className:"topBar",rightTitle:t?"\u5b8c\u6210":"\u7f16\u8f91",onRightClick:this.editAction}),A.a.createElement("div",{className:"content"},A.a.createElement(m.a,{style:{height:this.state.height},key:"1",className:"listView",ref:function(t){return e.lv=t},dataSource:this.state.dataSource,renderFooter:function(){return A.a.createElement("div",{style:{height:"100px"}})},renderRow:function(n,i,a){return n.collection_info?A.a.createElement("div",{key:a,className:"collection-item",onClick:e.selectRow.bind(e,n.collection_info.id,n.collection_info.is_open)},A.a.createElement("div",{className:"itemContent"},t&&A.a.createElement("img",{src:e.checkStatus(n.collection_info.id),className:"selectImg"}),A.a.createElement("div",{className:"rightContent"},A.a.createElement("div",{className:"cover"},A.a.createElement("img",{src:n.collection_info.cover})),A.a.createElement("div",{className:"textContent"},A.a.createElement("div",{className:"goods-name line-clamp-two"},n.collection_info.brand," ",n.collection_info.name),A.a.createElement("div",{className:"tags"},0===Number(n.collection_info.freight)&&A.a.createElement("span",{className:"tag"},"\u5305\u90ae"),3===n.collection_info.activity&&A.a.createElement("span",{className:"tag"},"\u6ee1",Number(n.collection_info&&n.collection_info.activity_reach_money),"\u51cf",Number(n.collection_info&&n.collection_info.activity_reduce_money))),1===n.collection_info.is_open?A.a.createElement("div",{className:"price-count"},A.a.createElement("span",{className:"price"},"\uffe5 ",A.a.createElement("span",null,parseFloat(n.collection_info.price))),A.a.createElement("span",{className:"count"},n.collection_info.sales,"\u4eba\u5df2\u8d2d\u4e70")):A.a.createElement("div",{className:"xiajia"},"\u5df2\u4e0b\u67b6"))))):A.a.createElement("div",null)},useBodyScroll:!1,pullToRefresh:A.a.createElement(l.a,{refreshing:this.state.refreshing,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:10}),this.state.isEdit&&A.a.createElement("div",{className:"bottomView"},A.a.createElement("div",{className:"bottom-left",onClick:this.handleAllSelect},A.a.createElement("img",{src:this.state.allSelect?x.a:w.a,className:"selectImg"}),A.a.createElement("div",null,"\u5168\u9009")),A.a.createElement("div",{className:"cancelBtn",onClick:this.handleCancelAction},"\u53d6\u6d88\u6536\u85cf"))),A.a.createElement(o.a,{toast:!0,text:"Loading...",animating:this.state.isLoading}))}}]),t}(A.a.Component))||i;t.default=F},755:function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return i})},756:function(e,t,n){"use strict";var i=n(21),a=n(22),o=n(24),c=n(23),l=n(25),r=n(0),s=n.n(r),m=n(283),d=(n(63),n(80));t.a=function(e){var t,n;return n=t=function(t){function n(e){var t;return Object(i.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).componentDidCache=function(){t.setState({render:!1})},t.componentDidRecover=function(){t.setState({render:!0})},t.state={render:!0},e.cacheLifecycles&&e.cacheLifecycles.didCache(t.componentDidCache),e.cacheLifecycles&&e.cacheLifecycles.didRecover(t.componentDidRecover),t}return Object(l.a)(n,t),Object(a.a)(n,[{key:"render",value:function(){return!d.a.getState().login.isLogin&&this.state.render?s.a.createElement(m.a,{to:"/login"}):s.a.createElement(e,this.props)}}]),n}(s.a.Component),t.displayName=e.displayName||e.name+"_HOC"||"Component_HOC",n}},842:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAnhJREFUWAnNmDFoFEEUhv+3dyS53CUBhUAEUUSrAwsLE4sgiE0qSa1dksb0MVgKSkinoIV6nVjYJGUKTaFFkiqgpBFBLCSNCSh3iZ7ejfPPZuBuvb3bzd7s+Yq9mzez73375u3b4QmORCklVxb3Z/VwBlBFpVCwcy5+RVAGZEfbLm0snXguIop+hJfJu5Wxau3wBRSucZy6CNb7Mrlb7x7kdz1GpqcwfHodCDKQRSbu7M3pP09Tj0qDw8KA4OKZLD58qd3Oar3Omd5J8XQWD2eGUMh52P78574GUsVe4RDm0ewQ8gOeQRgdlhGdQ27fprCHDcLU6wpP1g48Hy3sLkd6u002MoS596qMN++rSB3IwjBnKBZmbbtqxqkCdYIhUWpAUWBSA4oKkwpQHBjnQHFhDNDZ0QzmpwZx6RyLdveEMCx6YW9TmCf5+PW3unAqC/09w/JKBStbv8LWRtZbmGCdsa92O0PeYdUcQ6DPI1iYzmN6vL/d+o5zdpuOA0Pj3vJqBd8rdeMoKZSNTNxtanxK79NuDfPPfiSGShoZC2UKY1IoC5MkMk1AHBwXqpsw5Gj6dMSF6jbMP0BURIVyAdMSKAqUKxj6lvGFb34h4igg58cyeDw3jJG8v7Msni/f/sSNy/2xK3DAdOiwKYeCq1pt382rOWcw9N8WiAuCUNRRgic9X5v82hGILoJQrmDoKxJQI9R+uW4O5FE+lLwvrrRN6lbGBvuAA/883mo6sc7zuxDR7biEIYveMtMSiU7kdKXsMIdKTn3EM14StkAmFvde96w3ZIF1j2hz6eR1nUOi2CzSrat1O5f671HDiiymg0YARup/aOn9BYC0mxoV4Y+1AAAAAElFTkSuQmCC"},985:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAXBJREFUWAntWDtOw0AQ3bdCKAUX4Aw+AB0FCvSBFtPwuQJUFFRwBQSNTZukTyIKKjiAz8AFKCKKDPMWs3IkpGmwTbFTxJOZJO/t20kxD64OEUE5XZw5kVMtZeJk66fXxhMOH/q7lQMe89HwAYAQB3wpxy/bguWTktrj+65DyTxDBsf50e67pzJ9kuHhKUTNASgm83OR1T0bKtensr12MijIlrW2grfisDxRMjd6V5vEAfwFivHsVedlhwUPXOWHB3fMu4pyMrtcidwST+fqzeszi+CqTMy7StYxM9/8N7V9Tb+dsYlJLlToX0UiZF1HUigpZClg9dMMJYUsBax+mqGkkKWA1U8zlBSyFLD6aYaSQpYCVt/XLkT4XFhvrW/8cb+JSS4c6ipi6K4d866Sdcxqg/6M2g9ht+fir7u22hHdmg3x7MoFtGPK6XxBSyQ2ekjoEeWj/aEaHmoPqVnEQg88AiSxaw4SHDRWv5Xq39L7ArNJmABCTPyYAAAAAElFTkSuQmCC"},986:function(e,t,n){var i=n(987);"string"===typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(46)(i,a);i.locals&&(e.exports=i.locals)},987:function(e,t,n){(e.exports=n(45)(!1)).push([e.i,'.myCollection {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n.myCollection .topBar {\n  height: 44px;\n  width: 100%;\n}\n.myCollection .content {\n  flex: 1;\n  background: #fff;\n}\n.myCollection .content .bottomView {\n  border: 1px solid #F5F6F8;\n  background-color: #fff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 0.5rem;\n  position: absolute;\n  bottom: 0.0rem;\n  width: 100%;\n}\n.myCollection .content .bottomView .bottom-left {\n  display: flex;\n  align-items: center;\n  margin-left: 0.15rem;\n  color: #657281;\n}\n.myCollection .content .bottomView .bottom-left .selectImg {\n  width: 0.12rem;\n  height: 0.12rem;\n  margin-right: 0.08rem;\n}\n.myCollection .content .bottomView .cancelBtn {\n  color: #FFB516;\n  border: 1px solid #FFB516;\n  height: 0.3rem;\n  width: 0.8rem;\n  line-height: 0.3rem;\n  border-radius: 0.15rem;\n  text-align: center;\n  margin-right: 0.15rem;\n}\n.myCollection .am-list-view-scrollview {\n  margin: 0 !important;\n}\n.myCollection .am-list-body:before {\n  content: "" !important;\n  background-color: #fff !important;\n}\n.myCollection .am-list-body:after {\n  content: "" !important;\n  background-color: #fff !important;\n}\n.collection-item {\n  padding: 0.15rem 0.15rem;\n}\n.collection-item .itemContent {\n  display: flex;\n  align-items: center;\n}\n.collection-item .itemContent .selectImg {\n  width: 0.12rem;\n  height: 0.12rem;\n  margin-right: 0.08rem;\n}\n.collection-item .itemContent .rightContent {\n  display: flex;\n  position: relative;\n}\n.collection-item .itemContent .rightContent .cover {\n  height: 1.07rem;\n  width: 1.07rem;\n  flex-shrink: 0;\n  margin-right: 0.08rem;\n  font-size: 0;\n  display: flex;\n  align-items: center;\n  border: 1px solid #A1ADB9;\n  border-radius: 0.05rem;\n}\n.collection-item .itemContent .rightContent .cover img {\n  width: 100%;\n  max-height: 100%;\n  border-radius: 5px;\n}\n.collection-item .itemContent .rightContent .goods-name {\n  line-height: 0.2rem;\n  height: 0.4rem;\n}\n.collection-item .itemContent .rightContent .textContent {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.collection-item .itemContent .rightContent .tags {\n  margin: 0.03rem 0;\n  font-size: 0.1rem;\n  color: #FF5000;\n  height: 0.18rem;\n}\n.collection-item .itemContent .rightContent .tags .tag {\n  display: inline-block;\n  border: 1px solid #FF5000;\n  border-radius: 8px;\n  padding: 0.02rem 0.05rem;\n  margin-right: 0.05rem;\n}\n.collection-item .itemContent .rightContent .price-count {\n  line-height: 0.22rem;\n}\n.collection-item .itemContent .rightContent .price-count .price {\n  color: #FF5000;\n  margin-right: 0.1rem;\n}\n.collection-item .itemContent .rightContent .price-count .price span {\n  font-size: 0.16rem;\n}\n.collection-item .itemContent .rightContent .price-count .count {\n  color: #657281;\n  font-size: 0.12rem;\n}\n.collection-item .itemContent .rightContent .xiajia {\n  height: 0.2rem;\n  width: 0.5rem;\n  line-height: 0.2rem;\n  text-align: center;\n  color: #fff;\n  background: #A1ADB9;\n  border-radius: 0.1rem;\n}\n',""])}}]);
//# sourceMappingURL=44.49ed75bd.chunk.js.map